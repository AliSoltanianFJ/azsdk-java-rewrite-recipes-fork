type: specs.openrewrite.org/v1beta/recipe
name: com.azure.rewrite.java.core.MigrateAzureCoreSamplesToAzureCoreV2
displayName: Migrate azure-core samples to azure-core-v2
description: This recipe migrates the samples in azure-core to azure-core-v2
recipeList:
  # Recipe to migrate com.azure.core requirements in module-info.java to com.azure.core.v2
  - org.openrewrite.text.FindAndReplace:
      regex: true
      find: 'requires\s+(transitive\s+)?com\.azure\.core(?!\.v2)'
      replace: 'requires $1com.azure.core.v2'
      filePattern: '**/module-info.java'
  # Recipes to migrate implementations of com.azure.core.client.traits.HttpTrait
  # to io.clientcore.core.models.traits.HttpTrait
  # Add http prefix to retryOptions
  - org.openrewrite.java.ChangeMethodName:
      methodPattern: com.azure.core.client.traits.HttpTrait retryOptions(..)
      newMethodName: httpRetryOptions
      matchOverrides: true